{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport userService from \"./userService\";\nconst initialState = {\n  user: [],\n  isError: false,\n  isLoading: false,\n  isSuccess: false\n};\nexport const getUsers = createAsyncThunk(\"get-all-users\", async (user, thunkAPI) => {\n  try {\n    return await userService.getS(user);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const register = createAsyncThunk(\"register-new-user\", async (data, thunkAPI) => {\n  try {\n    return await userService.registerS(data);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const singIn = createAsyncThunk(\"sing-in\", async (data, thunkAPI) => {\n  try {\n    console.log('selice', data);\n    return await userService.signInS(data);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const addToCart = createAsyncThunk('add-to-cart', async (data, thunkAPI) => {\n  try {\n    console.log('slice', data);\n    return await userService.addToCartS(data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error);\n  }\n});\nexport const deleteFromCart = createAsyncThunk('delete-from-cart', async (data, thunkAPI) => {\n  try {\n    console.log('slice', data);\n    return await userService.deleteFromCartS(data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error);\n  }\n});\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(getUsers.pending, state => {\n      state.isLoading = true;\n    }).addCase(getUsers.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n    }).addCase(getUsers.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n    }).addCase(register.pending, state => {\n      state.isLoading = true;\n    }).addCase(register.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      // state.user = action.payload;\n      alert('User Created Successfully');\n    }).addCase(register.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n      alert('Something went wrong');\n    }).addCase(singIn.pending, state => {\n      state.isLoading = true;\n    }).addCase(singIn.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      localStorage.setItem('user', JSON.stringify(action.payload));\n      alert('You are logged in successfully');\n      window.location.reload();\n    }).addCase(singIn.rejected, (state, action) => {\n      var _action$payload, _action$payload$respo, _action$payload2, _action$payload2$resp;\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n      if ((action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : (_action$payload$respo = _action$payload.response) === null || _action$payload$respo === void 0 ? void 0 : _action$payload$respo.status) === 404) {\n        return alert('Invalid Authentication. Do you have any account?');\n      }\n      if ((action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : (_action$payload2$resp = _action$payload2.response) === null || _action$payload2$resp === void 0 ? void 0 : _action$payload2$resp.status) === 401) {\n        return alert(\"Username and password not match\");\n      } else alert(\"Something went wrong!\");\n    }).addCase(addToCart.pending, state => {\n      state.isLoading = true;\n    }).addCase(addToCart.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      localStorage.setItem('user', JSON.stringify(action.payload));\n      alert(\"Book added to your cart successfully\");\n    }).addCase(addToCart.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n    }).addCase(deleteFromCart.pending, state => {\n      state.isLoading = true;\n    }).addCase(deleteFromCart.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      localStorage.setItem('user', JSON.stringify(action.payload));\n    }).addCase(deleteFromCart.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n    });\n  }\n});\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","userService","initialState","user","isError","isLoading","isSuccess","getUsers","thunkAPI","getS","e","rejectWithValue","register","data","registerS","singIn","console","log","signInS","addToCart","addToCartS","error","deleteFromCart","deleteFromCartS","userSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","alert","localStorage","setItem","JSON","stringify","window","location","reload","_action$payload","_action$payload$respo","_action$payload2","_action$payload2$resp","response","status","reducer"],"sources":["/home/mettihew/MERN/book/client/src/store/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport userService from \"./userService\";\n\nconst initialState = {\n  user: [],\n  isError: false,\n  isLoading: false,\n  isSuccess: false,\n};\n\nexport const getUsers = createAsyncThunk(\n  \"get-all-users\",\n  async (user, thunkAPI) => {\n    try {\n      return await userService.getS(user);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\n\nexport const register = createAsyncThunk(\n  \"register-new-user\",\n  async (data, thunkAPI) => {\n    try {\n      return await userService.registerS(data);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\n\nexport const singIn = createAsyncThunk(\n  \"sing-in\",\n  async (data, thunkAPI) => {\n    try {\n      console.log('selice', data);\n      return await userService.signInS(data);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\n\n\nexport const addToCart = createAsyncThunk('add-to-cart', async (data, thunkAPI) => {\n  try {\n    console.log('slice', data);\n    return await userService.addToCartS(data)\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error)\n  }\n})\nexport const deleteFromCart = createAsyncThunk('delete-from-cart', async (data, thunkAPI) => {\n  try {\n    console.log('slice', data);\n    return await userService.deleteFromCartS(data)\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error)\n  }\n})\n\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(getUsers.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(getUsers.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n      })\n      .addCase(getUsers.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n      })\n\n      .addCase(register.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(register.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        // state.user = action.payload;\n        alert('User Created Successfully')\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n        alert('Something went wrong')\n      })\n\n      .addCase(singIn.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(singIn.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        localStorage.setItem('user', JSON.stringify(action.payload))\n        alert('You are logged in successfully')\n        window.location.reload()\n      })\n      .addCase(singIn.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n        if (action?.payload?.response?.status === 404) {\n        return  alert('Invalid Authentication. Do you have any account?')\n        }\n        if (action?.payload?.response?.status === 401) {\n         return alert(\"Username and password not match\")\n        }\n        else alert(\"Something went wrong!\")\n      })\n\n\n      .addCase(addToCart.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(addToCart.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        localStorage.setItem('user', JSON.stringify(action.payload))\n        alert(\"Book added to your cart successfully\")\n      })\n      .addCase(addToCart.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n      })\n\n      .addCase(deleteFromCart.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(deleteFromCart.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        localStorage.setItem('user', JSON.stringify(action.payload))\n      })\n      .addCase(deleteFromCart.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n      })\n   \n\n  },\n});\n\nexport default userSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}