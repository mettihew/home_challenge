{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport userService from \"./userService\";\nconst initialState = {\n  user: [],\n  isError: false,\n  isLoading: false,\n  isSuccess: false\n};\nexport const getUsers = createAsyncThunk(\"get-all-users\", async (user, thunkAPI) => {\n  try {\n    return await userService.getS(user);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const register = createAsyncThunk(\"register-new-user\", async (data, thunkAPI) => {\n  try {\n    return await userService.registerS(data);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const singIn = createAsyncThunk(\"sing-in\", async (data, thunkAPI) => {\n  try {\n    return await userService.signInS(data);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const descSlice = createAsyncThunk(\"edit-description\", async (data, thunkAPI) => {\n  try {\n    return await userService.desS(data);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const messageSlice = createAsyncThunk(\"message-user\", async (data, thunkAPI) => {\n  try {\n    return await userService.messageS(data);\n  } catch (e) {\n    return thunkAPI.rejectWithValue(e);\n  }\n});\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(getUsers.pending, state => {\n      state.isLoading = true;\n    }).addCase(getUsers.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n    }).addCase(getUsers.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n    }).addCase(register.pending, state => {\n      state.isLoading = true;\n    }).addCase(register.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n      alert('User Created Successfully');\n    }).addCase(register.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n      alert('Something went wrong');\n    }).addCase(singIn.pending, state => {\n      state.isLoading = true;\n    }).addCase(singIn.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n      localStorage.setItem('user', JSON.stringify(action.payload));\n      alert('You are logged in successfully');\n      setTimeout(() => {\n        window.location.reload();\n      }, 2000);\n    }).addCase(singIn.rejected, (state, action) => {\n      var _action$payload, _action$payload$respo, _action$payload2, _action$payload2$resp;\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n      if ((action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : (_action$payload$respo = _action$payload.response) === null || _action$payload$respo === void 0 ? void 0 : _action$payload$respo.status) === 404) {\n        alert('Invalid Authentication. Do you have account?');\n      }\n      if ((action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : (_action$payload2$resp = _action$payload2.response) === null || _action$payload2$resp === void 0 ? void 0 : _action$payload2$resp.status) === 401) {\n        alert(\"Username and password not match\");\n      } else alert(\"Something went wrong!\");\n    }).addCase(descSlice.pending, state => {\n      state.isLoading = true;\n    }).addCase(descSlice.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n      localStorage.setItem('user', JSON.stringify(action.payload));\n      window.location.reload();\n    }).addCase(descSlice.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n    }).addCase(messageSlice.pending, state => {\n      state.isLoading = true;\n    }).addCase(messageSlice.fulfilled, (state, action) => {\n      state.isError = false;\n      state.isLoading = false;\n      state.isSuccess = true;\n    }).addCase(messageSlice.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n    });\n  }\n});\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","userService","initialState","user","isError","isLoading","isSuccess","getUsers","thunkAPI","getS","e","rejectWithValue","register","data","registerS","singIn","signInS","descSlice","desS","messageSlice","messageS","userSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","alert","localStorage","setItem","JSON","stringify","setTimeout","window","location","reload","_action$payload","_action$payload$respo","_action$payload2","_action$payload2$resp","response","status","reducer"],"sources":["/home/mettihew/MERN/book/client/src/store/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport userService from \"./userService\";\n\nconst initialState = {\n  user: [],\n  isError: false,\n  isLoading: false,\n  isSuccess: false,\n};\n\nexport const getUsers = createAsyncThunk(\n  \"get-all-users\",\n  async (user, thunkAPI) => {\n    try {\n      return await userService.getS(user);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\n\nexport const register = createAsyncThunk(\n  \"register-new-user\",\n  async (data, thunkAPI) => {\n    try {\n      return await userService.registerS(data);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\n\nexport const singIn = createAsyncThunk(\n  \"sing-in\",\n  async (data, thunkAPI) => {\n    try {\n      return await userService.signInS(data);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\nexport const descSlice = createAsyncThunk(\n  \"edit-description\",\n  async (data, thunkAPI) => {\n    try {\n      return await userService.desS(data);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\n\nexport const messageSlice = createAsyncThunk(\n  \"message-user\",\n  async (data, thunkAPI) => {\n    try {\n      return await userService.messageS(data);\n    } catch (e) {\n      return thunkAPI.rejectWithValue(e);\n    }\n  }\n);\n\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(getUsers.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(getUsers.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n      })\n      .addCase(getUsers.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n      })\n\n      .addCase(register.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(register.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n        alert('User Created Successfully')\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n        alert('Something went wrong')\n      })\n\n      .addCase(singIn.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(singIn.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n        localStorage.setItem('user', JSON.stringify(action.payload))\n        alert('You are logged in successfully')\n        setTimeout(() => {\n          window.location.reload()\n        }, 2000);\n      })\n      .addCase(singIn.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n        if (action?.payload?.response?.status === 404) {\n          alert('Invalid Authentication. Do you have account?')\n        }\n        if (action?.payload?.response?.status === 401) {\n          alert(\"Username and password not match\")\n        }\n        else alert(\"Something went wrong!\")\n      })\n\n\n      .addCase(descSlice.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(descSlice.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n        state.user = action.payload;\n        localStorage.setItem('user', JSON.stringify(action.payload))\n        window.location.reload()\n      })\n      .addCase(descSlice.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n      })\n      .addCase(messageSlice.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(messageSlice.fulfilled, (state, action) => {\n        state.isError = false;\n        state.isLoading = false;\n        state.isSuccess = true;\n      })\n      .addCase(messageSlice.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isSuccess = false;\n        state.isError = true;\n      })\n\n  },\n});\n\nexport default userSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}